<!-- 搜索引擎按钮(外显) 开始-->
<style>
.search_button{
padding:4px 1%;margin:0 0 10px 1.7%;
width:12.82%;display:inline-block;
transform:translateY(var(--SearT));}
.search_button:first-child{margin-left:0px;}
#button_group {
z-index:-1;transform:translate(-50%,44px);
width:calc(var(--SearWo));height:20vh;
overflow:scroll hidden;font-size:15px;
transition:calc(var(--Trantime)*.8) ease 1ms;white-space:nowrap;padding:8px 0 0;}
:has(:is(#button_group,.opSug_wpr,#search_submit,#container_copy>.box):hover,#search_input:focus) #button_group{
width:calc(var(--SearWt));
z-index:2;height:max-content;}
:has(:is(#button_group,.opSug_wpr,#search_submit,#container_copy>.box):hover,#search_input:focus) .search_button {transform:translateY(0);}
</style><script>
function 扩展搜索按钮(config = {}){
let layer = document.createElement("div"), sbutton,
spart = document.querySelector(".search_part"),
sbar = document.querySelector(".search_bar"),
input = document.querySelector("#search_input");
function searchOther(source) {let a = input.value;
if ("" != a) {window.open(config.搜索引擎[source].地址.replace("%@",a));input.value = "";input.focus();input.blur();} else {window.open(config.搜索引擎[source].主页);}}function setButtonEvent(sbutton) {
sbutton.addEventListener("click", (e) => {
e.preventDefault();searchOther(e.target.num);}, false);}
layer.id = "button_group";layer.className = "url";
for (var i = 0; i < config.搜索引擎.length; i++) {
sbutton = document.createElement("div");
sbutton.innerHTML = config.搜索引擎[i].名称;
sbutton.classList.add("search_button");sbutton.num = i;setButtonEvent(sbutton);layer.appendChild(sbutton);}
spart.insertBefore(layer,sbar);}
window.addEventListener("load",
扩展搜索按钮.bind(this,{搜索引擎: [
{名称:"百度",
地址:"https://www.baidu.com/s?&word=%@",
主页:"https://www.baidu.com"},
{名称:"谷歌",
地址:"https://www.google.com/search?q=%@",
主页:"https://www.google.com"},
{名称:"必应",
地址:"https://cn.bing.com/search?q=%@",
主页:"https://cn.bing.com"},
{名称:"秘塔",
地址:"https://metaso.cn/?q=%@",
主页:"https://metaso.cn"},
{名称:"搜狗",
地址:"https://wap.sogou.com/web/sl?keyword=%@",
主页:"https://wap.sogou.com"},
{名称:"头条",
地址:"https://so.toutiao.com/search?keyword=%@",
主页:"https://www.toutiao.com"},
{名称:"神马",
地址:"https://yz.m.sm.cn/s?q=%@",
主页:"https://yz.m.sm.cn"},
{名称:"勾勾",
地址:"https://gogo.webbillion.cn/search?q=%@",
主页:"https://gogo.webbillion.cn"},
{名称:"云盘",
地址:"https://alipansou.com/search?k=%@",
主页:"https://alipansou.com"},
{名称:"Ｂ站",
地址:"https://www.bilibili.com/search?keyword=%@",
主页:"https://www.bilibili.com"},
{名称:"知乎",
地址:"https://www.zhihu.com/search?q=%@",
主页:"https://www.zhihu.com/topsearch"},
]}));</script>
<!-- 搜索引擎按钮(外显) 结束 -->


<!-- 搜索框右侧删字/扫码按钮 开始 -->
<style>
#fltBtn,#scanqr{
right:0;border:0;height:100%;width:33px;
background-color:transparent;}
#fltBtn{
height:46px;display:var(--ClearDis);
padding-left:4px;}
#fltBtn .url{
transition:calc(var(--Trantime)*1.3);
width:15px;height:15px;border-radius:100%;
border:1px solid currentColor;}
#fltBtn .url div{
font-size:12px;transform:translateY(-3px);}
:has(:is(#button_group,.opSug_wpr,#search_submit,#container_copy>.box):hover,#search_input:focus) #fltBtn .url{
transform:rotate(4turn);
transition:calc(var(--Trantime)*1.3);}
#scanqr{
display:var(--ScanDis);padding-right:10px;}
#scanqr .url{
opacity:var(--ScanOpa);border-radius:calc(var(--SearRadius) - 2px);
margin:0 auto;width:22px;height:22px;
background:linear-gradient(90deg,#aaa -50%,transparent 30%,transparent 70%, #aaa 150%),linear-gradient(#aaa -50%,transparent 30%,transparent 70%, #aaa 150%);}
#scanqr .url div{
opacity:var(--ScanOpa);transform:translateY(-24px) scale(1.2);height:100%;width:100%;
background:linear-gradient(180deg, transparent 50%, #fff 300%);
animation:scan calc(var(--Animation)) infinite linear;}
@keyframes scan {
to{transform:translateY(18px) scale(1.2);}}
</style><script>
/*删字按钮部分*/
window.addEventListener("load",() => {
input = document.querySelector("#search_input");
document.querySelector(".search_bar > span").insertAdjacentHTML("beforebegin",`<button type=button onclick="if(input.value) {input.value = input.value.replace(/[^!-}]/g, '').replace(/[^^-]]/g, '').replace(/^.*http/, 'http');input.focus();} else {input.blur();}" ondblclick="const val =input.value.replace(/[^]/g,'');input.value = val;input.dispatchEvent(new InputEvent('input'));" id="fltBtn"><div class="url"><div>×</div></div></button>`);}, 0);
/*扫码按钮部分*/
window.addEventListener("load",() => {document.querySelector(".search_bar > span").insertAdjacentHTML("beforebegin",`<button type=button onclick="location.assign('v://scanner');" id="scanqr"><div class="url"><div></div></div></button>`);
input.addEventListener("blur", (e) => {
document.querySelector("#scanqr").style.display = (e.target.value === "") ? "revert-layer" : "none";});}, 0);
</script>
<!-- 搜索框右侧删字/扫码按钮 结束 -->


<!-- 聚焦搜索框方式 开始 -->
<script>
/*去除下滑打开地址栏↓*/
Object.defineProperty(window,'initGesture', {value: () => null,writable: false});
/*下滑聚焦搜索框↓*/
document.addEventListener('DOMContentLoaded',
function() {var lastClientX = 0;var lastClientY = 0; 
document.addEventListener('touchstart',function (e) 
{lastClientX = e.touches[0].clientX;
lastClientY = e.touches[0].clientY;},false); 
document.addEventListener('touchmove',function (e) 
{var touch = e.touches[0];var target = e.target;
if (target.classList.contains('opSug_wpr')) 
{e.preventDefault();}
/* 判断下滑聚焦的最短垂直距离 */
if ((touch.clientY - lastClientY) > 180) {
if (Math.abs(touch.clientY - lastClientY) > Math.abs(touch.clientX-lastClientX)) {
var inputElements = document.getElementsByTagName('input');
if (touch.clientY > 0) {if (inputElements.length > 0) 
{inputElements[0].focus();}} 
else if (inputElements.length > 0) {
inputElements[0].blur();}}}},true);});
/*双击聚焦搜索框↓*/
document.addEventListener("DOMContentLoaded", function () {
var date=0;var gap=300;/* 最大时间间隔(ms) */
var input = document.querySelector("#search_input");
var book = document.querySelector("#bookmark_part"); document.addEventListener("click",function (e) {if ( !document.querySelector(".search_part").contains(e.target) && !( book && book.contains(e.target))) {if (date === 0) {date = new Date();} else {if (new Date() - date < gap) {input.focus(); date = 0;} else {date = new Date();}}}}, false);}); 
/*长按搜索框聚焦↓*/
window.addEventListener("load", ()=>
{const si=document.querySelector("#search_input");si.addEventListener("contextmenu", (e) =>{if(document.activeElement!==si){e.preventDefault();e.target.blur();e.target.focus();}});});
</script>
<!-- 聚焦搜索框方式 结束 -->


<!-- 搜索书签 开始 -->
<script>
function Search4Bookmarks () {
const boxCo = document.querySelector('#box_container')
const boxCoCopy = boxCo.cloneNode(true)
boxCoCopy.id = "container_copy";
document.querySelector("#content").appendChild(boxCoCopy);
boxCoCopy.querySelectorAll('.box>[title]').forEach(e=>e.title=e.title.toLowerCase());
const searchInput = document.querySelector('#search_input');
const style = document.createElement('style');
style.id = 'S4B';document.head.append(style);
const ShowSearchResults = () => {style.innerHTML=searchInput.value?(boxCo.scrollLeft=0)||`#container_copy>.box:not(:has([title*="${searchInput.value.toLowerCase()}"])){width:0;margin:0;border:0;}
#container_copy>.box:has([title*="${searchInput.value.toLowerCase()}"]){margin:0 1.5% 0 0;width:calc((101.5%/var(--BMnum)) - 1.5%) !important;} #container_copy>.box:has([title*="${searchInput.value.toLowerCase()}"]):last-child{margin-right:0;}`:'';}
const E = (e,f)=>searchInput.addEventListener(e,f?ShowSearchResults:()=>setTimeout(ShowSearchResults,0))
E('input',1);E('focus',1);E('blur',0)
const observer = new ResizeObserver(mutations => {
mutations.forEach(mutation => {
if (mutation.borderBoxSize?.length > 0) {
boxCoCopy.style.bottom =  (getComputedStyle(document.querySelector(":root")).getPropertyValue("--SugY") == "auto") ? '-8px' : mutation.borderBoxSize[0].blockSize + 'px';}});});
observer.observe(document.querySelector('#sug_tbody'));}
document.addEventListener("DOMContentLoaded", Search4Bookmarks)</script>
<!-- 搜索书签 结束 -->


<!-- 更改多彩书签背景透明度 开始-->
<script>
document.addEventListener("DOMContentLoaded", () => {const books = document.querySelectorAll(".title");
books.forEach((book) => {book.style.backgroundColor = `rgba(${getComputedStyle(book).backgroundColor.split("(")[1].slice(0, -1)}, var(--Opacity))`;});});
</script>
<!-- 更改多彩书签背景透明度 结束-->


<!-- 修改主页地址栏标题-->
<script>document.title="⠀";</script>


<!--点击打开小书签的logo-->
<a class="logo" id="logo" href="v://bookmarks">Explorer</a>